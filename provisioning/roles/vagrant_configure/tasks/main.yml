---
# Disable fastestmirror plugin for apache - for faster installs on vagrant
- name: Replace enabled line in fastestmirror.conf
  lineinfile:
    dest: /etc/yum/pluginconf.d/fastestmirror.conf
    regexp: "^enabled=1"
    line: "enabled=0"

- name: Vagrant networking; resolve.conf option
  lineinfile:
    dest: /etc/resolv.conf
    state: present
    line: "options single-request-reopen"

- name: Vagrant networking; sysconfig network option
  lineinfile:
    dest: /etc/sysconfig/network
    state: present
    line: "RES_OPTIONS=single-request-reopen"
  notify: restart network

- name: Copy in custom motd file
  copy:
    src: "../files/motd.txt"
    dest: /etc/motd
    mode: 0644

- name: Set 'ccat' alias in global bashrc
  lineinfile:
    dest: /etc/bashrc
    line: "{{ item.line }}"
  with_items:
    - { line: '# The line below aliases the menu command to show the motd.' }
    - { line: "alias menu='cat /etc/motd'" }

- name: Create a symlink to the shared host/guest projects folder
  file:
    src: /vagrant/projects
    dest: /home/vagrant/projects
    owner: vagrant
    group: vagrant
    state: link